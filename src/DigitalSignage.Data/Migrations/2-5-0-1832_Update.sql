IF object_id(N'[dbo].[FK_dbo.NoteDisplays_dbo.Notes_Note_Id]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[NoteDisplays] DROP CONSTRAINT [FK_dbo.NoteDisplays_dbo.Notes_Note_Id]
IF object_id(N'[dbo].[FK_dbo.NoteDisplays_dbo.Displays_Display_Id]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[NoteDisplays] DROP CONSTRAINT [FK_dbo.NoteDisplays_dbo.Displays_Display_Id]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Note_Id' AND object_id = object_id(N'[dbo].[NoteDisplays]', N'U'))
    DROP INDEX [IX_Note_Id] ON [dbo].[NoteDisplays]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_Display_Id' AND object_id = object_id(N'[dbo].[NoteDisplays]', N'U'))
    DROP INDEX [IX_Display_Id] ON [dbo].[NoteDisplays]
CREATE TABLE [dbo].[NoteAssignments] (
    [Id] [int] NOT NULL IDENTITY,
    [NoteId] [int] NOT NULL,
    [Start] [datetime],
    [End] [datetime],
    [Comment] [nvarchar](max),
    [Display_Id] [int],
    CONSTRAINT [PK_dbo.NoteAssignments] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_NoteId] ON [dbo].[NoteAssignments]([NoteId])
CREATE INDEX [IX_Display_Id] ON [dbo].[NoteAssignments]([Display_Id])
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.Notes')
AND col_name(parent_object_id, parent_column_id) = 'Start';
IF @var0 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[Notes] DROP CONSTRAINT [' + @var0 + ']')
ALTER TABLE [dbo].[Notes] DROP COLUMN [Start]
DECLARE @var1 nvarchar(128)
SELECT @var1 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.Notes')
AND col_name(parent_object_id, parent_column_id) = 'End';
IF @var1 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[Notes] DROP CONSTRAINT [' + @var1 + ']')
ALTER TABLE [dbo].[Notes] DROP COLUMN [End]
DROP TABLE [dbo].[NoteDisplays]
ALTER TABLE [dbo].[NoteAssignments] ADD CONSTRAINT [FK_dbo.NoteAssignments_dbo.Notes_NoteId] FOREIGN KEY ([NoteId]) REFERENCES [dbo].[Notes] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[NoteAssignments] ADD CONSTRAINT [FK_dbo.NoteAssignments_dbo.Displays_Display_Id] FOREIGN KEY ([Display_Id]) REFERENCES [dbo].[Displays] ([Id])
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201808081053405_2-5-0-1832_NoteAssignmentsAdded', N'DigitalSignage.Data.Migrations.Configuration',  0x1F8B0800000000000400ED5DD96EE3BA19BE2FD077307CD51673E224D353B441720EB20E82992C184FA607BD193036E308A3C595E82099A24FD68B3E525FA194254ADC179992E5C4C84DCCE5E3CF9F1FF75FFCFFF79FFF1EFEFA1C858327986641121F0DF776768703184F926910CF8E860BF4F0D35F87BFFEF2FBDF1D9E4FA3E7C15792EE7D9E0EE78CB3A3E12342F383D1289B3CC208643B513049932C79403B93241A816932DADFDDFDDB686F6F0431C410630D06879F17310A22B8FC817F9E26F104CED1028457C9148659198E63C64BD4C135886036071378343C0B660102E13898C5600677CE0002C3C17118002CCA18860FC30188E3040184053DB8CBE018A5493C1BCF710008BFBCCC214EF700C20C961538A893DBD665773FAFCBA8CE48A0268B0C259123E0DEFB5239233E7B23150F2BE561F59D6335A397BCD64B151E0D4F40164CB2E1802FEAE0344CF364827E2FE3871464285D4CD022853B45FBEC9CE3FFBF830B3079DC2910DF0DB4F9DE55D4D9DD59FEBD1B9C2EC23CE628860B9482F0DDE076711F06938FF0E54BF21DC647F1220CE9BAE0DAE038260007DDA6C91CA6E8E5337C286B78BD8822980E072336EF88CF5C65E5F2155AB88CD1FBFDE1E01A0B01EE43585186D2D8182529FC0063980204A7B7002198E216BF9CC2A5D20509B8F23EC034983CA22CC6BF48A998ABB8DF0D0757E0F9138C67E8F16888FF1D0E2E8267382521A524777180BB29CE84750C4D857D5CC0F4070C5B2F0725BF5D7DBAC04AC3EA786CBDB4E72C449D15360B937B10B657BDC351DD59F55D186610FD58E4457AECC504B43F1DB91229BB9CBA77673677579D1A2BE7013CA630664BFDCB9F25A5EA913EE783433D1E4948B6FFF3CF5624D3166CCDBAB3209B87E06565CE8D2142B826D94E09D81FBE35615997DCBAEE62A2F812A0B083526084DB1EB55FD018BD84306BBD988B20D4F7553FC57C4893C5BCF552F0621C2F99C3BBB4FDE5C23544C7D3690AB3F69BE8EF497839EFB0B02B30E9B0B4BBE9FC3649916930D2E39CC16C9206F362E7D1B2CC6778B5FD424A3949921082D82CF035780A66CBC19427528260769C65780E89F0688A75FE1986CB84D963302F368664C6F92626BE4893E87312D6D39C90E6DB3859A4937CC04A0C09BF80740651C3593647ABC1FC4DB62CEE76CEB59E73B1DECCE599E62050F7CC332CC6972032663A8FA7AE594E93A8208DEFAEABED75D29EC6D2ED5B91AEEE649268A17FC9D2ACDCB5FC76A86D37EA78E9EAD8F1F2854C2B1D825FFD2598B953B7C9CC9AB6B778F080018C8FBFA3E0C9E78E9F01EE0F950BB19A10BACEB979BBFD42760F9BFD9538760283191ECC71EDDB205A8DBE65DB966D30BE05787A6F65482B90B72CDBB20CC6E3AF6D306CFC75CBAE2DBB60FC0FB898B5335B16C85B96BD6996A5C98F13F8E47FE94FE1F6886185548D285667DD408E9DAC995F2D2DFB79F02DD3DE3CD35A58F2D3C05B86BD5D868D1188A229AEBED741AC46ED0FB76A999AD08BCDDD3363372F262D92CB4680165107C52A2F4AAA0E26BD2DA99BE41B95B0BE2E91C50BF725D2442B5D9850B2F8EB5015687FFA133BFAB9F62797B1D35F7F72E9C57AA44F0FD3B8B25C397941EEBDEB23A00D671B418C83C2542F03406774D2D2F040977E9D728DA8CF7AF798FE8001BA0D81CE64A225B9CBC2F1366E01C375E80D7379A1336F6932E18BC5DCC08707DC2B7057D799DCB654C7E31FDD97F901CEF07082406D02D05DD92710F7E5EFB837ECB5DEAE5551FBAD17759CEA6E815B9FFE298B6DC9F45F4FD754BA7AF697440B93BF2C8D6CEED709C95D346B05E5D2CA846592680466D335159A3EC2B0929CCEA013BF4E6751072A71D38A901DB2552548625D058A3416C297099B0A9EDFB358099D27D4093CFE6A212C4ED4545072646F252C49AC13B84863217499D05970E614582F3693542A34954227329DACA1C0F67D524CAF11DDAE470A691B56C2AE3FB26935C29B7B2393CE5568FA10C4D74693C8A0DD68920AD96C348FB32C99044BD9A456AF85B9205BE3F3783AB0B01D2C6678D102114FF778F318CCF11A120B7434FC93A0527D01950ED80278D8BD21BFDBBC89CF6008111C1C4F8AEF414F4136C17C14F799580036046F50619AEF0641788A5B116F79831889BBD9209E0473109A85E7B25ADA11E6A25585F03167700EE37CC76A6E1B9BD289B1AD28415510A734938E0E4714D9F41C541A87AB7862B614AFC9527D3CC5F2657767674FC344A3897953BE3BA845B63855C9AB5DA9D6A252434F8BDD472F964483D4E2DB345834EA9A1AEDD8740EDD29955327D5A8C3871C1D7455D53EC44C00C5A6A40FDC94EF8328D1B83D57CB1C956A6A4D3C95AA6663B94A2D73ED59215BF4F689B59285B684BAF40ABF23FE8A8A5B3389454D6D2C93CBFD8E3D4BF8DD4F9F18CCEDB824EC25DBBB8E98CB2A6BCDAC65B5B3B18C1D7F75602B7D10D527A652675F1296E6C76B1D31B456D09AD9596B646399591E34DAB3803F75EC1343B9834E094BC9B96A474C6595B566B6B2DAD93CC6D267CC169C901E38F782ADB2336E9AABCC617ADB4C95A8695D3C95E8655359EAB6D9525F30F488AF86AD967897D20D73FBB3D152A96953396CBFCD92DF31F588BB9A4D167B85D60D67FBB1C592A96643B82ABD5054B1416FC65A5381BEC4EC84A6FA6B4F8BEEE3899F3A05D910426718EE444E9D427C08E29D99C54573FEDE07CE01D3EA4A8F36303EBB5FBE07F22C7B55E92E83A54573561A7BF15CC9F1C7101183AEF215DDFA829B5C229511C29D1E97BFBE6B1221EA38034A793F2893A3BA703440B0D7863224FE62D102500563CCCC5D7108205CBC251ABD165242D2892C71C95CA5C424092CF1F2931B25561E698943F6D64A2C92C084C7EC7F443426DA0E4BDF14621A3B547543B0F106347ADE11A0E848030E354D0830541C87428D6CAAEE59BEA345A5D43CB7C50FBA761634555D244383308EDBD9CC7090E2E03862AB6EA116F5437EA26EECEC3A98DA182D3BA82AD563B0463D46430E7BB537D096D4BE585494D1D243B1B4176D3DA8DA28F96E0493A8463D33AEA2146E52D12946636E603811658FBF565090DC4C8002D4CF913E14450FD036DA529DC1186A283986F1A037C9E98944799A39C88706C98464A33DD9EEDF5047EE00C083D6B87DBB44638A39D687B6F2A58F8DA6F8CB3DFBEB3D0F1AA22EE524DA91ACDE7C68862CE46CB423BB6072BB62F2A025EE6248A229C5DA74256D310B55ADAE94571B2E971BABE8497625416B49B7E6F6A023EBA15D7FBAEE7CBEBEBACA0CE3BA716BE1417956A3BAFA48D7E950777585698674EDAEC95D51F2AF0E442D990F13ED8F13A9EAA8776EF6878036EAD668867C09511D50557187A3C2C1551970385278C23ABC02F379FEF0709DB30C198C0BB758A73F8DDDDD454505C668C26C87F8E3B4AA2494A46006B9D8FC9DDD29BC08D20CE5BEB8EE41FE65E4E9341292A98EE314BB69522A73E226B61FD96093E4F9FFB2E3BFA5A3B01D394CADCD0B5CC17CDFB5AC2BA4F71E8A8C83DC45190841CA7D8943BC499D26E1228AD9309E856A14F6D90C1A8B8DB147AC1C41D16055A03D0EE7E88946E3A2EC3159774E34241B638F28F1D944C34AA245ECC311C70DE1385B20A170F5C052DA8EF09A4DB823E7554836B457E755E99C75BC44AB5BE7D04987C85E74D188FA2B303562E55C8906AB027BC381EA7069550A90EB0077022873AA54CB37915BC35C0B03DDB5E300573A30A221CA20078CCA3D11035385DA2311FF43340E09B34721EE85681412E6309914DE839859A408B2C7A07D03D14074B8436B53EE7F9836A7C2EDD1580F3F341E1BE38448BBF1E120E92827CCCA590F075885DBA3312E7B683826C201AF70CBC3201541BD1914F903F255C746EE82D37D883401B43452961FCB32FD46F101AD1AA5F44DC30E4FC08D834B573534C232C0654C29FDD6B0034A24BB6F2E78B336DEF9615B438E6DCE1C5C395EE1A708458B2AE7BDD2B10A33EF9561BDE185E952C88D1F5A340BA218F2AB345DBFD14DEB5AF5E6B70EC9FF629DBCC12D4AD64316688F449B51410DE9C0071DC896142D934279DCDB8C1072380732A800B644689908D22BCA662410A11C0820CBBC6DFC961B5F7903DB8C0072380712A800B644688B08FAEB65471A68C06C48A0CDAE5473FD363DA3690AECF26CCD4C38E1643BE91F037C2E124D88F65C68B444DC12C207217C2D107568F644705E1E6E49B01209280B855519A086B2687E5D66CD0122F5A90F778EA8F908488DE8FFCEBB74FFC01C6A1741BDA180CEE0C58D014A240B0268F276D755FD33AA7471404395410E761340B4E720610E7563FC1C307563629A215EA76ACC6B273919B706342413E18C57792A904056714E4C59FA1FE038B20CB34761DC0BD0504C843D5EEE318086C97FBB8C7EF5DBFFECD85787DBA3D1AFF9B39618757803B47D05DABE939EF88BA763F9B553DB23326BB52735C0907C6864656F21C9E7767998DB27F29399E1E324517F5657440456FEC12E25C60A122ABF206E7C89A595EC3489A7C1F263F5CB2C77DD50B96DB0AB376FCF29924730EBE49354D42D43AADF9559676952C9D87A2E15925B6E2E159195E69DBC8D65916438C0B57F0AA6B97DE5F82543302AD781FF0C4FC36079DD46125C81387880192A9C250DF777F770773D0E039015F6B7A5F5E801FF71B49539E9DEFBDC9C144EA3119FDDDD283547C9B229E3CB49F44E45BEB416BEE5BE8CA7F0F968F8AFC1BF9B388392DB689ADD40917CC5B79E41AE78A38B2767B730A20FB5F809A4934790FE2102CF7FA4116DBCA254669F1EB038A34F0F88ACCDA7074089B5A733AAB5F334EA5B45CF0CD559519A79CAE66E91ADECF2BF28E81E4F95B1ECFD854A2379DE83C1E56FDFE8ECEF0637291EC00E06BB5863AE7254569D6C5B8B0E80B4B8D6ED2EB597B46BD826CDD972235EFB1A6A4A134C1F489515A60730628AE9018AD8637A802AAD323D20D166991EE068BB4C0F70AC59A61F40DA28D30F62659549F53357FFA3B431A607A94A934C32A89A04B21EBC749B91CD1DC34AA348AA088BF9A7C8B5D2CC531A5216E5E6C7562888A06B539FD74E009B4254A6943E98476D97DC145AE754297585D596C463D0C6D2D566CAB542AA0C2E7DCC6EA5D5A5F721877BAEC2F35A59659C60E185BDCAF906D6C8C452C27E89BC425F95BDB1B16DF637D3ECE4B3F26D93BF9926CF5F3FD936F79B696EF284CBB6C95F7F9333EFD1F86E70ADFD9045B373F9DF42E39F74DBF06DAEE1B6ADDFF7D66F6B29B76DF9DEB63CFD9892E766D75977991B9DCDBDA65B58C74B25C9F15A6196D8CD5515F59295E7A6D499FE999B52D7A97CB7A6923616BD97CEBB52EF2D8D118BD25110BF34B96320C688ABA1B066889ED9CDDB23B24DEB7620C918227A9693B748F4AD86D2447195015B4465AC153D4B9C9B307A86A4ED193D43D3C68D7E754C1B3AFA453E4E85737A4FC3BEE8B4C5F85A3CF7B0BBE067BE23B72CBCE7094E0A6B6FF78386EE58144F75D8DC220D5CBCAD181FA09158A9291E7AE9C4E98FDD8BFAE2F3F74C0B56616CD3EDEEEC0826C93DA284FA1DB53EB0426FC3DBA9EB32C5BB81B20769D7EAA18C32D3A3A4A042DB7544D6ADCF31DD4390EEC5AEC54DAEA5D7D1B5728ABBD2A624E1625E13B74CEF166D08BF5CFC85F68264F409AC8469DDF9015D0FDDB4DFBD6F08E76CFD7BF6826FE4CC57C2B56E7C77AE8767CA4FEA378463FC833FBDE5576E2B20E1561EFC1A79257DC5694338257B3FA8B7BC224609126E91A8D7C82FE523517DE798F279A2FE318CB181A0F9C544BC2A76E9DF9EDA0C6E6DCE525FB4B51059F66A17FA16EF5B6D06DF366399CF5A76883C7B958B7CC3B359BDE497D95B96D4B915D3A6747027F47224B9275A691FC572334471E2951B9D4DC57AE714F77845F5D510EFCC8B6FCCF2ED1272275ABEC350DF3E9243F432A278A8E26838BD4F70AB17F797244EB8E8E1B0EB737811BE8E9396A0F415CC1752DD4409455431B202548E9F057CFE624A28864F202BCDE4155A56A8A22875016658EE005BC0E7E26505E9FD13AB0AD43B8E9724D215EDE2619E3BDB52964D12E8CAB5F4434F9F7928CBCB237565493CCEAACA21FB5F65592481AE3C85DF56A14C664F2496C8444BCBD379405594A6278F984653AE0B75D80593AA602D71B49E38F902E9D95C288D8E9415A5F6922994434DD74231549CAC14B5F34CA9E75099A58AC471A8D1A0855983D04363ED5B459C70D556075C5E3A8A5F0B393B4B55BF1C26D6DBCE1083A90A37D9312EDEFAA202991581D6A9AECE55A264E549C96EE73B57588670AE117D56999B1E6D3C7B5BBBAB6E5075E9842F7134D3860AAC9D51DBB85EF1A90C713E51B95A69432D566EA64D8E477CAA839DE1648E46DA5043BEC0B15181D4E586CFEAD7CB34DEC5461BD526EB2C9BAA2B1D4EF8AC3EBB7A943998F0AA0666F967E169BDD5C151B298159D2BB4507DEB91D1C2DD804745A8C645E3D2D9834AAC4645C363FB1E55211B13B58B797715480F0025F5371F142A8F0A29E9D5FB835554A7A9B6F0B86A1577382AB6166500FE293CA27A38FABC88F3B7928A5F67305F9E5610F9CBB0319C30E761559ACBF8212187739C44240967BB7F0511C09A01C7290A1EC004E1E809C48D9CAF0CBF827081939C47F7707A19DF2CD07C81709561741F320BEEFC784F57FEE14890F9F066F9A058E6A30A58CC206FDC9BF8641184D34AEE0BC977060A88FCDCB0FC302B6F4B947FA0357BA990AE93D812A8545F75DC491EFCCB6EE23178824D64BBCBE02738039397DBF22D5C3588B92158B51F9E05609682282B31EAFCF827E6F0347AFEE5FF6F97922D67ED0000 , N'6.2.0-61023')

