/*! DigitalSignage.WebUi2.Manager - v2.2.0-1647 - 06.12.2016 */
!function(){"use strict";function a(a,b,c){a.$state=b,a.$stateParams=c}function b(a,b,c,d){a.theme("default").primaryPalette("brown").accentPalette("red"),b.icon("menu","icons/ic_menu_black_48px.svg").icon("save","icons/ic_save_black_48px.svg").icon("terms","icons/ic_event_note_black_48px.svg").icon("display","icons/ic_dvr_black_48px.svg").icon("power","icons/ic_power_settings_new_black_48px.svg").icon("restart","icons/ic_replay_black_48px.svg").icon("refresh","icons/ic_refresh_black_48px.svg").icon("delete","icons/ic_delete_black_24px.svg").icon("person","icons/ic_person_black_24px.svg").icon("personadd","icons/ic_person_add_black_24px.svg"),c.state("main",{abstract:!0,url:"/:mode",templateUrl:"app/main.html",controller:"MainController",controllerAs:"vm",params:{mode:"user"}}).state("main.displays",{url:"/displays",templateUrl:"app/displays/displays.html",controller:"DisplaysController",controllerAs:"vm"}).state("main.display",{url:"/displays/:id",templateUrl:"app/displays/display.html",controller:"DisplayController",controllerAs:"vm"}).state("main.terms",{url:"/terms",templateUrl:"app/terms/terms.html",controller:"TermsController",controllerAs:"vm"}).state("main.term",{url:"/terms/:id",templateUrl:"app/terms/term.html",controller:"TermController",controllerAs:"vm"}),d.otherwise("/support/displays")}agGrid.initialiseAgGridWithAngular1(angular),angular.module("app",["app.core","app.displays","app.terms","ngMaterial","ui.router","agGrid"]).run(a).config(b),a.$inject=["$rootScope","$state","$stateParams"],b.$inject=["$mdThemingProvider","$mdIconProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("app.core",["breeze.angular"])}(),function(){"use strict";angular.module("app.displays",[])}(),function(){"use strict";angular.module("app.terms",[])}(),function(){"use strict";function a(a,b,c,d){function e(){var a=c.EntityQuery.from("Displays"),b=i.executeQuery(a).catch(function(a){console.log(a)}).finally(function(){k.metaDataFetched=!0});return b}function f(a){var b=c.EntityQuery.from("Displays").where("Id","==",a),d=i.executeQuery(b).catch(function(a){console.log(a)}).finally(function(){k.metaDataFetched=!0});return d}function g(){function a(){b.get(h+"/Display/"+f.Id+"/status").then(function(a){f.Status=a.data},function(a){f.Status=-1}),f.Screenshot=f.ControlUrl+"/api/screenshot?dt="+(new Date).getTime()}function c(){f.ControlUrl&&b.get(f.ControlUrl+"/api/shutdown")}function d(){f.ControlUrl&&b.get(f.ControlUrl+"/api/restart")}function e(){return b.get(h+"/Display/"+f.Id+"/poweron")}var f=this;f.Status=-1,f.Screenshot="",f.poweron=e,f.update=a,f.restart=d,f.shutdown=c}var h=d.apiUrl+"/breeze/EurekaDaten",i=new c.EntityManager(h),j=i.metadataStore;j.registerEntityTypeCtor("Display",g);var k={getDisplayList:e,getDisplay:f,metaDataFetched:!1};return k}angular.module("app.core").factory("settingsDataService",a),a.$inject=["$q","$http","breeze","appConfig"]}(),function(){"use strict";function a(a,b,c){function d(){var a=b.EntityQuery.from("VerfahrenList"),c=l.executeQuery(a).catch(function(a){console.log(a)}).finally(function(){m.metaDataFetched=!0});return c}function e(a){var c=b.EntityQuery.from("Verfahren").where("VerfahrensId","==",a).expand("Stammdaten, Besetzung, ParteienAktiv, ProzBevAktiv, ParteienPassiv, ProzBevPassiv, ParteienBeigeladen, ProzBevBeigeladen, ParteienZeugen, ParteienSV"),d=l.executeQuery(c).catch(function(a){console.log(a)}).finally(function(){m.metaDataFetched=!0});return d}function f(a){return a.entityAspect.setDeleted(),l.saveChanges().finally(function(){m.metaDataFetched=!0})}function g(){return l.saveChanges().finally(function(){m.metaDataFetched=!0})}function h(){return l.rejectChanges()}function i(){return l.hasChanges()}function j(a){return l.createEntity(a)}var k=c.apiUrl+"/breeze/EurekaDaten",l=new b.EntityManager(k),m={getVerfahrenList:d,getVerfahren:e,deleteVerfahren:f,saveChanges:g,rejectChanges:h,hasChanges:i,createNewEntity:j,metaDataFetched:!1};return m}angular.module("app.core").factory("termsDataService",a),a.$inject=["$q","breeze","appConfig"]}(),function(){"use strict";function a(a,b,c,d){function e(){c.getDisplay(a.id).then(function(a){j.display=a.results[0],j.display.update()})}function f(){j.display&&j.display.poweron().then(function(a){console.log(a)},function(a){console.log(a)})}function g(){j.display&&j.display.restart()}function h(){j.display&&j.display.shutdown()}function i(){j.display&&j.display.update()}var j=this;j.display=[],j.loading=!1,j.poweron=f,j.restart=g,j.shutdown=h,j.refresh=i,j.appConfig=d,e()}angular.module("app.displays").controller("DisplayController",a),a.$inject=["$stateParams","$http","settingsDataService","appConfig"]}(),function(){"use strict";function a(a){function b(){a.getDisplayList().then(function(a){e.gridOptions.api.setRowData(a.results),e.gridOptions.rowData&&e.gridOptions.rowData.forEach(function(a){a.update()})})}function c(a){return a==-1?"undefiniert":0==a?"ausgeschaltet":1==a?"angeschaltet":"unbekannt"}function d(a){return a==-1?"img/display-undefined-icon.png":0==a?"img/display-offline-icon.png":1==a?"img/display-online-icon.png":"img/display-unknown-icon.png"}var e=this,f=[{headerName:"",width:30,suppressSizeToFit:!0,template:'<img ng-src="{{vm.getStateImg(data.Status)}}" alt="{{vm.getStateText(data.Status)}}"></img>'},{headerName:"Name",template:'<a ui-sref="main.display({id:data.Id})">{{data.Name}}</a>'},{headerName:"Titel",field:"Title"},{headerName:"",width:110,suppressSizeToFit:!0,template:'<a href="" ng-click="data.update()">Aktualisieren</a>'}];e.getStateText=c,e.getStateImg=d,e.gridOptions={angularCompileRows:!0,columnDefs:f,rowData:null,onGridReady:function(a){a.api.sizeColumnsToFit()}},b()}angular.module("app.displays").controller("DisplaysController",a),a.$inject=["settingsDataService"]}(),function(){"use strict";function a(a,b){function c(){d.showMenu="support"===a.mode}var d=this;d.showMenu=!1,c()}angular.module("app").controller("MainController",a),a.$inject=["$stateParams","appConfig"]}(),function(){"use strict";function a(){function a(a){function b(){d.items.push(a.createNewEntity(d.entityName))}function c(a){var b=d.items.indexOf(a);a.entityAspect.setDeleted(),d.items.splice(b,1)}var d=this;d.addNewItem=b,d.deleteItem=c}var b={restrict:"E",templateUrl:"app/terms/parteien.directive.html",scope:{items:"=",title:"@",entityName:"@"},controller:["termsDataService",a],controllerAs:"vm",bindToController:!0};return b}angular.module("app.terms").directive("dsParteien",a)}(),function(){"use strict";function a(){function a(a){function b(){d.items.push(a.createNewEntity(d.entityName))}function c(a){var b=d.items.indexOf(a);a.entityAspect.setDeleted(),d.items.splice(b,1)}var d=this;d.addNewItem=b,d.deleteItem=c}var b={restrict:"E",templateUrl:"app/terms/prozbev.directive.html",scope:{items:"=",title:"@",entityName:"@"},controller:["termsDataService",a],controllerAs:"vm",bindToController:!0};return b}angular.module("app.terms").directive("dsProzbev",a)}(),function(){"use strict";function a(){function a(a){function b(){d.items.push(a.createNewEntity(d.entityName))}function c(a){var b=d.items.indexOf(a);a.entityAspect.setDeleted(),d.items.splice(b,1)}var d=this;d.addNewItem=b,d.deleteItem=c}var b={restrict:"E",templateUrl:"app/terms/richter.directive.html",scope:{items:"=",title:"@",entityName:"@"},controller:["termsDataService",a],controllerAs:"vm",bindToController:!0};return b}angular.module("app.terms").directive("dsRichter",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){h()}function h(){e.getVerfahren(b.id).then(function(a){l.term=a.results[0]})}function i(){e.rejectChanges()}function j(){e.saveChanges().catch(function(a){d.show(d.alert().parent(angular.element(document.body)).title("Fehler").content("Beim Speichern der Daten ist ein Fehler aufgetreten.").ariaLabel("Fehler Dialog").ok("OK"))}).then(function(){c.show(c.simple().parent(angular.element(document.body)).content("Gespeichert!").position("bottom right").hideDelay(4e3))})}function k(){var b=d.confirm().parent(angular.element(document.body)).title("Wirklich löschen?").content("Soll dieses Verfahren wirklich gelöscht werden?").ariaLabel("Löschen Dialog").ok("Ja").cancel("Nein");d.show(b).then(function(){e.deleteVerfahren(l.term).then(function(){a.go("main.terms")},function(a){d.show(d.alert().parent(angular.element(document.body)).title("Fehler").content("Beim Löschen des Verfahrens ist ein Fehler aufgetreten.").ariaLabel("Fehler Dialog").ok("OK"))})},function(){})}var l=this;l.reset=i,l.save=j,l.delete=k,l.appConfig=f,g()}angular.module("app.terms").controller("TermController",a),a.$inject=["$state","$stateParams","$mdToast","$mdDialog","termsDataService","appConfig"]}(),function(){"use strict";function a(a,b,c){function d(){c.getVerfahrenList().then(function(a){e.gridOptions.api.setRowData(a.results)})}var e=this,f=[{field:"uhrzeitAktuell",sort:"asc"}],g=[{headerName:"Urhzeit",children:[{headerName:"Plan",width:80,suppressSizeToFit:!0,field:"UhrzeitPlan"},{headerName:"Aktuell",width:80,suppressSizeToFit:!0,field:"UhrzeitAktuell"}]},{headerName:"Aktenzeichen",width:150,suppressSizeToFit:!0,template:'<a ui-sref="main.term({id:data.VerfahrensId})">{{data.Az}}</a>'},{headerName:"Gericht",hide:!0,rowGroupIndex:0,field:"Gericht"},{headerName:"Sitzungssaal",hide:!0,rowGroupIndex:1,field:"Sitzungssaal"},{headerName:"Status",width:150,suppressSizeToFit:!0,field:"Status"},{headerName:"Parteien",children:[{headerName:"Aktiv",suppressSorting:!0,suppressMenu:!0,template:'<span ng-repeat="item in data.ParteienAktiv">{{item.Partei}}<span ng-hide="$last">; </span></span>'},{headerName:"Passiv",suppressSorting:!0,suppressMenu:!0,template:'<span ng-repeat="item in data.ParteienPassiv">{{item.Partei}}<span ng-hide="$last">; </span></span>'}]},{headerName:"Datum",width:100,field:"Datum"}];e.gridOptions={angularCompileRows:!0,enableSorting:!0,enableFilter:!0,columnDefs:g,rowData:null,groupUseEntireRow:!0,groupDefaultExpanded:1,onGridReady:function(a){a.api.sizeColumnsToFit(),a.api.setSortModel(f)}},d()}angular.module("app.terms").controller("TermsController",a),a.$inject=["$stateParams","$filter","termsDataService"]}();