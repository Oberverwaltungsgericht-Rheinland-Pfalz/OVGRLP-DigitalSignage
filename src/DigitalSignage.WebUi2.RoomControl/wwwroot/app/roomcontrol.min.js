/*! DigitalSignage.WebUi2.RoomControl - v2.1.0 - 23.11.2015 */
!function(){"use strict";angular.module("app",["ngMaterial","ui.router","restangular"])}(),function(){"use strict";function a(a,b){a.state("rooms",{url:"/",templateUrl:"app/rooms/rooms.html",controller:"RoomsController",controllerAs:"vm"}).state("room",{"abstract":!0,url:"/:id",templateUrl:"app/rooms/room.html",controller:"RoomController",controllerAs:"vm"}).state("room.terms",{url:"/terms",templateUrl:"app/terms/terms.html",controller:"TermsController",controllerAs:"vm"}).state("room.display",{url:"/display",templateUrl:"app/display/display.html",controller:"DisplayController",controllerAs:"vm"}),b.otherwise("/")}angular.module("app").config(a),a.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,b,c){function d(){e()}function e(){j.loading=!0,k.one(b.id).get().then(function(a){j.display=a,j.display.status=-1,j.display.customGET("status").then(function(a){j.display.status=a.result,j.display.status<1?j.screenshot="../assets/img/offline-display.png":j.screenshot=j.display.controlUrl+"/api/screenshot?dt="+(new Date).getTime(),j.loading=!1},function(a){j.loading=!1})},function(a){j.loading=!1})}function f(){j.display&&j.display.controlUrl&&j.display.customGET("start").then(function(a){})}function g(){j.display&&j.display.controlUrl&&a.get(j.display.controlUrl+"/api/restart")}function h(){j.display&&j.display.controlUrl&&a.get(j.display.controlUrl+"/api/shutdown")}function i(){e()}var j=this,k=c.service("settings/displays");j.display=[],j.loading=!1,j.poweron=f,j.restart=g,j.shutdown=h,j.refresh=i,d()}angular.module("app").controller("DisplayController",a),a.$inject=["$http","$stateParams","Restangular"]}(),function(){"use strict";function a(a,b,c){function d(){e()}function e(){h.one(a.id).get().then(function(a){g.display=a})}function f(){b("navbar").toggle()}var g=this,h=c.service("settings/displays");g.display=[],g.openNavbar=f,d()}angular.module("app").controller("RoomController",a),a.$inject=["$stateParams","$mdSidenav","Restangular"]}(),function(){"use strict";function a(a,b){function c(){d()}function d(){f.loading=!0,g.getList().then(function(a){f.displays=a,f.loading=!1,e()},function(b){f.loading=!1,a.show(a.alert().parent(angular.element(document.body)).title("Fehler").content("Beim abrufen der Daten ist ein Fehler aufgetreten.").ariaLabel("Fehler Dialog").ok("OK"))})}function e(){var a=[];f.displays.forEach(function(b){a.push(b.group)}),_.uniq(a).forEach(function(a){f.filters.push({active:!1,title:a,expression:{group:a}})})}var f=this,g=b.service("settings/displays");f.displays=[],f.loading=!1,f.filters=[],c()}function b(){return function(a,b){var c=_.where(b,{active:!0}),d=[];return c.length>0?_.each(c,function(b){d=d.concat(_.where(a,b.expression))}):d=a,_.uniq(d)}}angular.module("app").controller("RoomsController",a).filter("multifilter",b),a.$inject=["$mdDialog","Restangular"]}(),function(){"use strict";function a(a,b,c,d){function e(){f()}function f(){h.loading=!0,d.one("settings/displays",a.id).getList("termine").then(function(a){h.termine=a,h.loading=!1},function(a){h.loading=!1,b.show(b.alert().parent(angular.element(document.body)).title("Fehler").content("Beim abrufen der Daten ist ein Fehler aufgetreten.").ariaLabel("Fehler Dialog").ok("OK"))})}function g(){h.termine.forEach(function(a){d.one("daten/verfahren",a.id).customPUT(a).then(function(){},function(a){})}),c.show(c.simple().content("Gespeichert!").position("top left").hideDelay(4e3))}var h=this;h.termine=[],h.loading=!1,h.save=g,e()}angular.module("app").controller("TermsController",a),a.$inject=["$stateParams","$mdDialog","$mdToast","Restangular"]}();